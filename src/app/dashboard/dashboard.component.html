<nb-card id="stepper-card">
  <nb-card-header>Configure new server</nb-card-header>
  <nb-card-body>
    <nb-stepper #stepper linear="true">

      <nb-step [stepControl]="imageForm" label="Image">
        <form #imageForm="ngForm" class="step-container">
          <div class="input-group">
            <input type="text"
                   placeholder="Enter an image name"
                   class="form-control"
                   name="name"
                   required
                   nbInput
                   ngModel
                   #name="ngModel"
                   [status]="name.invalid ? 'danger' : 'basic'">
            <button nbButton nbStepperNext>next</button>
          </div>
        </form>
      </nb-step>

      <nb-step [stepControl]="configForm" label="More config">
        <form #configForm="ngForm" class="step-container">
          <div class="input-group">
            Currently there are no other configuration options
            <button nbButton nbStepperNext (click)="deployServer(name.value)">finish</button>
          </div>
        </form>
      </nb-step>

      <nb-step [stepControl]="configForm" [hidden]="true" label="More config">
        <div class="step-container">
          <h3>Wizard completed!</h3>
          <button nbButton (click)="stepper.reset()">Try again</button>
        </div>
      </nb-step>

    </nb-stepper>
  </nb-card-body>
</nb-card>

<nb-card *ngIf="gameServers.length == 0">
  <nb-card-body>There are currently no GameServers deployed.<br>Go create one!</nb-card-body>
</nb-card>

<nb-accordion multi>
  <nb-accordion-item expanded="true" *ngFor="let gameServer of gameServers">
    <nb-accordion-item-header>
      {{ gameServer.id }}: {{ gameServer.configuration.resources.templatePath }}
      <div class="button-group">
        <button class="status-button" nbButton [disabled]="!restartPossible(gameServer.id)" status="info" size="small"
                (click)="restartServerEvent($event, gameServer.id)" shape="round">
          <nb-icon pack="fas" icon="sync"></nb-icon>
        </button>
        <button class="status-button" nbButton [disabled]="!stopPossible(gameServer.id)" status="danger" size="small"
                (click)="stopServerEvent($event, gameServer.id)" shape="round">
          <nb-icon pack="fas" icon="stop"></nb-icon>
        </button>
        <button class="status-button" nbButton [disabled]="!startPossible(gameServer.id)" status="success" size="small"
                (click)="startServerEvent($event, gameServer.id)" shape="round">
          <nb-icon pack="fas" icon="play"></nb-icon>
        </button>
        <button class="config-button" nbButton status="success" size="small"
                (click)="openServerConfiguration(gameServer.id)" shape="round">
          <nb-icon pack="fas" icon="cog"></nb-icon>
        </button>
      </div>
      <nb-alert *ngIf="gameServer.status == statusEnum.Error" class="server-status" status="danger">Error</nb-alert>
      <nb-alert *ngIf="gameServer.status == statusEnum.Running" class="server-status" status="success">Running
      </nb-alert>
      <nb-alert *ngIf="gameServer.status == statusEnum.Restarting" class="server-status" status="info">Restarting
      </nb-alert>
      <nb-alert *ngIf="gameServer.status == statusEnum.Stopped" class="server-status" status="warning">Stopped
      </nb-alert>
    </nb-accordion-item-header>
    <nb-accordion-item-body>
      <div class="col-1">
        <p class="title">Description</p>
        <p>Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet. Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet.</p>
        <button nbButton status="danger" outline (click)="deleteContainer(gameServer.id)">Delete Container <nb-icon icon="trash"></nb-icon></button>
      </div>
      <div class="col-2">
        <table>
          <tbody>
          <tr>
            <td class="title">Template</td>
            <td>/mytemplate</td>
          </tr>
          <tr>
            <td class="title">Port Allocation</td>
          </tr>
          <tr>
            <td>TCP</td>
            <td>
              <ul>
                <li>1234</li>
                <li>4711</li>
              </ul>
            </td>
          </tr>
          <tr>
            <td class="title">Memory Allocation</td>
            <td>512 MB</td>
          </tr>
          <tr>
            <td class="title">Restart Behavior</td>
            <td>On failure</td>
          </tr>
          <tr>
            <td class="title">Startup Arguments</td>
          </tr>
          <tr>
            <td colspan="2">
              <input type="text"
                     placeholder="./myserver --port 1234 --api-port 4711"
                     name="startup-args"
                     required
                     nbInput
                     ngModel
                     fullWidth
                     #startupArgs
                     status="basic">
            </td>
          </tr>
          </tbody>
        </table>
      </div>
    </nb-accordion-item-body>
  </nb-accordion-item>

</nb-accordion>
